<html>
<head>
  <title>Camera & GPS App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* CSS สำหรับ Responsive Design */
  </style>
</head>
<body>
  <video id="camera-preview" width="320" height="240" autoplay></video>
  <button id="capture-button">Capture Photo</button>
  <div id="location-display"></div>
  <canvas id="photo-canvas" style="display: none;"></canvas>
  <script>
	const video = document.getElementById('camera-preview');
	const captureButton = document.getElementById('capture-button');
	const locationDisplay = document.getElementById('location-display');
	const canvas = document.getElementById('photo-canvas');
	const context = canvas.getContext('2d');

	// เข้าถึงกล้อง
	navigator.mediaDevices.getUserMedia({ video: true })
	  .then(stream => {
		video.srcObject = stream;
	  })
	  .catch(error => {
		console.error('Error accessing camera:', error);
	  });

	// เข้าถึง GPS
	function getLocation() {
	  if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(showPosition, showError);
	  } else {
		locationDisplay.innerHTML = 'Geolocation is not supported by this browser.';
	  }
	}

	function showPosition(position) {
	  locationDisplay.innerHTML = `Latitude: ${position.coords.latitude}<br>Longitude: ${position.coords.longitude}`;
	}

	function showError(error) {
	  switch (error.code) {
		case error.PERMISSION_DENIED:
		  locationDisplay.innerHTML = 'User denied the request for Geolocation.';
		  break;
		case error.POSITION_UNAVAILABLE:
		  locationDisplay.innerHTML = 'Location information is unavailable.';
		  break;
		case error.TIMEOUT:
		  locationDisplay.innerHTML = 'The request to get user location timed out.';
		  break;
		case error.UNKNOWN_ERROR:
		  locationDisplay.innerHTML = 'An unknown error occurred.';
		  break;
	  }
	}

	// ถ่ายภาพ
	captureButton.addEventListener('click', () => {
	  canvas.width = video.videoWidth;
	  canvas.height = video.videoHeight;
	  context.drawImage(video, 0, 0, canvas.width, canvas.height);
	  // ดึงข้อมูล GPS และเวลา (เรียก getLocation() ก่อน)
	  getLocation();
	  // คุณสามารถดึงข้อมูลจาก canvas และบันทึก/ส่งข้อมูลได้
	  const imageDataURL = canvas.toDataURL('image/png');
	  // โค้ดเพิ่มเติมสำหรับการบันทึก/ส่งข้อมูล
	});
  </script>
</body>
</html>